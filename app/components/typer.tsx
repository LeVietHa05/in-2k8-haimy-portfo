
'use client'

import Image from "next/image"
import { useState } from "react"

const data = [
    "<b>Người là</b><br>Ôi người ơi! <br>Người có biết <br>Người là - <br>Con chữ viết nửa nét rồi dừng, <br>Gợn sóng lăn tăn tắt đi khắc về bờ, <br>Lá chạm đất khi gió thoảng qua.<br>Người là - <br>Ý nghĩ vừa hiện đã tan<br>Hạt mưa tí tách ngày hạ nắng nóng<br>Không kịp bắt, cũng chẳng thể cảm.<br>Người là - <br>Dấu chân cuối đường lúc nắng tàn<br>Khoảng lặng bất chợt giữa nốt người ngân<br>Ánh hoàng hôn mệt mỏi sượt qua kẽ tay<br>Nhưng người cũng là - <br>Mùi đất nồm ẩm tỏa khắp ngõ ngách <br>Giấc mộng không ngừng lặp lại khi đêm buông<br>Quấn quýt lấy ta, không nguyện rời. <br><br>Và nếu người hỏi, ta không thể đáp<br>Bởi yêu thương cho người chỉ thể tồn tại<br>Trên vết mực phai mờ, cuộn mình giữa tờ giấy nhàu nhát.<br><br><hr><br><b>Tôi yêu em</b><br><br>Tôi yêu em<br> Một cách say mềm,<br> Thi sĩ ngã vào ánh trăng trong hồ,<br> Tay dang rộng, đuổi theo vần thơ dạt giữa sóng nước.<br><br>Một cách thành kính,<br>Kẻ sùng đạo nhắm mắt khắc ban mai tĩnh lặng,<br>Thì thầm tên em như lời nguyện thiêng,<br>Hạ mình, van xin một lần thoáng qua.<br>Một cách mù quáng,<br>Chiếc lá buông mình cho gió cuốn—<br>Chẳng biết sẽ rơi về đâu,<br>Chỉ biết rằng phải buông.<br>Tôi yêu em<br>Giữa những khoảng lặng của hơi thở,<br>Trong nỗi nhói khi bản nhạc vừa kết thúc,<br>Trên chiếc ghế trống vẫn còn vương hơi ấm em.<br>Và nếu một ngày em hỏi vì sao,<br>Tôi sẽ không trả lời<br> Không phải vì tôi không biết,<br> Mà bởi tình yêu,<br> Tình yêu thật sự,<br> Chỉ là câu hỏi bỏ ngỏ không cầu đáp lại.<hr><b>KỊCH BẢN</b><br><br>INT. LỚP HỌC - BUỔI SÁNG<br><br>Bốn người quay trở lại trường sau kỳ nghỉ hè.<br><br>Góc quay đi theo nửa người NHẬT ÁNH đang giả vờ tập trung học tập. Cô mím môi nhịn cười, tay cầm bút viết tưởng chừng như đang chăm chỉ viết vở nhưng thực chất lại đang viết vào cuốn sổ chung của nhóm.<br><br>Tiếng dạy học cất lên mờ mờ trong nền.<br><br>Trên bàn học là một chiếc camera được đặt cẩn thận. Bàn lộn xộn nhưng vẫn có tổ chức.<br><br>Ngược lại với sự lộn xộn có tổ chức của cô thì bạn cùng bàn — HOÀNG DƯƠNG — lại sắp xếp sách vở rất gọn gàng và sạch sẽ.<br><br>Trên bàn anh là một cuốn sách AP to đặt ở góc, sách vở được chồng lên nhau gọn gàng.<br><br>NHẬT ÁNH viết xong nhanh chóng đóng sổ lại và đưa cho HOÀNG DƯƠNG  đang chăm chỉ ngồi học bên cạnh.<br><br>HOÀNG DƯƠNG nhận được cuốn sổ liền ngừng bút, cúi đầu xuống lén lút đọc. Đọc xong anh liền không nhịn được khẽ bật cười một tiếng.<br><br>Nhân lúc giáo viên vẫn còn đang chăm chú giảng bài, anh liền đưa cuốn sổ xuống cho ĐỨC QUANG ngồi dưới.<br><br>ỨC QUANG nhanh chóng mở sổ ra, nhịn cười, rồi đưa lại sổ sang cho VÂN LAM.<br><br>ÂN LAM mở ra liền bật cười khúc khích, sau đó nhanh chóng ném sổ lại cho NHẬT ÁNH.<br><br>Cuốn sổ không may rơi xuống.<br><br>Máy quay theo góc nhìn NHẬT ÁNH. NHẬT ÁNH cúi xuống định nhặt thì ngẩng đầu lên, thấy một đôi chân trước mặt (chân của giáo viên).<br><br>Máy quay zoom vào cuốn sổ đang nằm trên sàn. Trang sách bị gió thổi qua, lật ra những hình vẽ nguệch ngoạc của cả bốn người, kèm những hình ảnh chụp chung và cả những lần nhắn tin lén qua cuốn sổ.<br><br>Có tiếng ghế được đẩy ra, tiếng giáo viên gõ bàn, tiếng cười khúc khích lén lút từ ĐỨC QUANG, VÂN LAM.<br><br>NHẬT ÁNH (O.S.)<br>Dạ thưa cô...<br><br>INT. NHÀ NHẬT ÁNH - BUỔI TỐI HÔM ẤY<br><br>Ba người nhà NHẬT ÁNH đang ăn cơm tối. Không khí gia đình ảm đạm và lạnh lẽo.<br><br>Camera quay lấy bóng lưng của NHẬT ÁNH đang ăn cơm, bố mẹ ngồi ở hai bên cô và cô ngồi giữa bàn.<br><br>Đằng sau NHẬT ÁNH là chiếc camera được treo lơ lửng lên phần tựa ghế, lens bị đóng lại.<br><br>NHẬT ÁNH ngồi thẳng lưng, đầu cúi xuống thể hiện sự vâng lời.<br><br>Bố mẹ NHẬT ÁNH không nhìn vào mặt cô, chỉ cúi xuống gắp đồ ăn cho vào bát.<br><br>BỐ NHẬT ÁNH<br>(giọng nghiêm khắc, có phần ra lệnh)<br>Ánh, bố thấy ngành kế toán của trường Đại học Quốc Gia năm ngoái lấy điểm không cao lắm đâu. Con tìm hiểu qua chưa?<br><br>MẸ NHẬT ÁNH<br>(giọng dịu dàng, khuyên nhủ)<br>Mẹ hiểu là con thích đi chụp ảnh và quay chụp linh tinh, nhưng mà nghề ấy khó kiếm sống lắm con ạ. Con cứ làm kế toán cho ổn định rồi muốn làm gì thì làm sau. Lúc đấy cũng chưa muộn mà?<br><br>Zoom vào máy camera được treo sau lưng của NHẬT ÁNH. Không khí như thu hẹp, giam cầm vào bóng Nhật Ánh ở giữa. <br><br>NHẬT ÁNH (O.S.)<br><br>(gật đầu nghe lời)<br><br>Con sẽ xem xét ạ.<br><br>INT. LỚP HỌC - BUỔI SÁNG<br><br>VÂN LAM rướn người lên để đưa cuốn sổ cho NHẬT ÁNH. Cuốn sổ chạm vào vai NHẬT ÁNH mấy lần nhưng cô lơ đãng, không quay đầu.<br><br>VÂN LAM<br><br>(nói nhỏ)<br><br>Nhật Ánh, Nhật Ánh!<br><br>NHẬT ÁNH đang viết bài, không để ý xung quanh, quay xuống trong bất ngờ và giật mình.<br><br>Máy quay vlog treo ở bên ghế, sách vở trên bàn gọn gàng. Một cuốn sách kế toán được đặt ở góc<br><br>NHẬT ÁNH<br><br>Hả? Sao?<hr><b>KỊCH BẢN</b><br><br>INT. LỚP HỌC - BUỔI SÁNG<br><br>Bốn người quay trở lại trường sau kỳ nghỉ hè.<br><br>Góc quay đi theo nửa người NHẬT ÁNH đang giả vờ tập trung học tập. Cô mím môi nhịn cười, tay cầm bút viết tưởng chừng như đang chăm chỉ viết vở nhưng thực chất lại đang viết vào cuốn sổ chung của nhóm.<br><br>Tiếng dạy học cất lên mờ mờ trong nền.<br><br>Trên bàn học là một chiếc camera được đặt cẩn thận. Bàn lộn xộn nhưng vẫn có tổ chức.<br><br>Ngược lại với sự lộn xộn có tổ chức của cô thì bạn cùng bàn — HOÀNG DƯƠNG — lại sắp xếp sách vở rất gọn gàng và sạch sẽ.<br><br>Trên bàn anh là một cuốn sách AP to đặt ở góc, sách vở được chồng lên nhau gọn gàng.<br><br>NHẬT ÁNH viết xong nhanh chóng đóng sổ lại và đưa cho HOÀNG DƯƠNG  đang chăm chỉ ngồi học bên cạnh.<br><br>HOÀNG DƯƠNG nhận được cuốn sổ liền ngừng bút, cúi đầu xuống lén lút đọc. Đọc xong anh liền không nhịn được khẽ bật cười một tiếng.<br><br>Nhân lúc giáo viên vẫn còn đang chăm chú giảng bài, anh liền đưa cuốn sổ xuống cho ĐỨC QUANG ngồi dưới.<br><br>ĐỨC QUANG nhanh chóng mở sổ ra, nhịn cười, rồi đưa lại sổ sang cho VÂN LAM.<br><br>VÂN LAM mở ra liền bật cười khúc khích, sau đó nhanh chóng ném sổ lại cho NHẬT ÁNH.<br><br>Cuốn sổ không may rơi xuống.<br><br>Máy quay theo góc nhìn NHẬT ÁNH. NHẬT ÁNH cúi xuống định nhặt thì ngẩng đầu lên, thấy một đôi chân trước mặt (chân của giáo viên).<br><br>Máy quay zoom vào cuốn sổ đang nằm trên sàn. Trang sách bị gió thổi qua, lật ra những hình vẽ nguệch ngoạc của cả bốn người, kèm những hình ảnh chụp chung và cả những lần nhắn tin lén qua cuốn sổ.<br><br>Có tiếng ghế được đẩy ra, tiếng giáo viên gõ bàn, tiếng cười khúc khích lén lút từ ĐỨC QUANG, VÂN LAM.<br><br>NHẬT ÁNH (O.S.)<br><br>Dạ thưa cô...<br><br>Dẫu vậy, HOÀNG DƯƠNG vẫn gượng cười, vui vẻ trò chuyện.<br><br>NHẬT ÁNH<br>(vui vẻ)<br>Ê Dương ơi, chiều nay mày không ở lại tiếc thật đấy. Toàn mấy trường khá nổi đến tư vấn, có cả trường mày đang nhắm đến đấy. Tao có giữ cho mày mấy quyển thông tin đấy, đến trường nhớ lấy.<br><br>HOÀNG DƯƠNG để điện thoại trên vai, ép tai vào, mắt nhìn xuống những đồng tiền trong tay.<br><br>HOÀNG DƯƠNG<br>Ờ ok ok, khi nào đến trường tao lấy sau. Cảm ơn mày nhiều.<br><br>Trời đột ngột đổ mưa. NHẬT ÁNH để điện thoại vào túi ba lô để cất máy quay vlog.<br><br>HOÀNG DƯƠNG chật vật thu gom túi ship đồ, tiền, nhét vào áo khoác. Điện thoại vứt nhanh vào túi áo để tránh mưa. Anh đứng dậy, chạy nhanh vào chỗ trú gần đó.<br><br>Tiếng mưa. Tiếng rè rè của cuộc điện thoại ngắt quãng. Tiếng người đi lại.<br><br>NHẬT ÁNH lấy điện thoại ra, tiếp tục cuộc gọi. Chuyển góc quay sang HOÀNG DƯƠNG.<br><br>HOÀNG DƯƠNG lau tay bằng áo, lấy điện thoại ra, đặt lên gối. Anh cố gắng lau khô những đồng tiền vừa bị ướt.<br><br>NHẬT ÁNH<br>Chỗ mày cũng bị mưa à? Xui ghê. May mà tao đi xe buýt, không bị ảnh hưởng lắm. Mà tao đi xe buýt nữa nên vừa có thể ngồi trên xe vừa quay lại cảnh mưa. Thảo nào cũng ra được vlog đẹp như mấy vlogger trên YouTube.<br><br>HOÀNG DƯƠNG đờ người trong một lúc. Những tờ tiền trên tay giờ ẩm ướt, rách nát, nhăn nhúm hơn.<br><br>Anh gượng cười, cứng nhắc trả lời.<br><br>HOÀNG DƯƠNG: Vậy sao?<br><br>Một khoảng lặng ngắn. Chỉ còn tiếng mưa, xe cộ inh ỏi.<br><br>NHẬT ÁNH (O.S.)<br>Xe buýt tao đến rồi. Mai gặp lại nhé.<br><br>Tiếng điện thoại bị ngắt.<br><br>Âm thanh của tiếng khóc bị nén lại.<br><br>Trong khoảnh khắc, HOÀNG DƯƠNG cố gắng kiềm chế cảm xúc, nhưng rồi không còn sức nữa.<br><br>Anh khóc nức nở, thân thể run lên từng đợt, tuyệt vọng hít thở từng hơi.<br><br>Máy quay từ từ lùi lại.<br>"
]

export default function Typer({ onClose }: { onClose: () => void }) {
    const [istransition, settransition] = useState(false)

    const handleClick = () => {
        settransition(true)
        setTimeout(() => {
            settransition(false)
        }, 300)

        // Scroll the text div down a little
        const textDiv = document.querySelector('.text-content') as HTMLElement
        if (textDiv) {
            const newScrollTop = textDiv.scrollTop + 100 // Scroll down by 100px
            textDiv.scrollTo({ top: newScrollTop, behavior: 'smooth' })
        }
    }
    return (
        <div className="absolute inset-0 bg-black/30 backdrop-blur-sm flex flex-col items-center justify-end z-2 overflow-hidden">
            <button onClick={onClose} className="absolute top-4 right-4 z-10">
                <Image src="/close.svg" alt="Close" width={24} height={24} />
            </button>
            <div className="flex justify-end items-end h-full relative">
                <div className="relative z-1  w-175 h-50 -bottom-10">
                    <Image src={'/typer-bg.svg'} fill alt="" className="bottom-0"></Image>
                </div>
                <div className={`w-16 h-28 absolute -left-10 z-0 hover:scale-105 origin-right transition-all duration-300 ${istransition ? '-rotate-45' : '-rotate-0'}`} onClick={handleClick}>
                    <Image src={'/typer-switch.svg'} alt="" fill></Image>
                </div>

                <div className="text-content w-120 h-152 absolute p-4 z-2 overflow-auto shadow-lg/30 bg-[#d7C4a9]" style={{ top: 123, left: 105 }} dangerouslySetInnerHTML={{ __html: data[0] }}></div>
            </div>

        </div>
    )
}
